{
  "id": "org.eyecreate.qiflora",
  "runtime": "org.kde.Platform",
  "runtime-version": "5.13",
  "sdk": "org.kde.Sdk",
  "command": "qiflora",
  "finish-args": [
    "--share=ipc",
    "--allow=bluetooth",
    "--system-talk-name=org.bluez",
    "--share=network",
    "--socket=x11",
    "--socket=wayland",
    "--device=dri",
    "--filesystem=xdg-data",
    "--talk-name=org.freedesktop.Notifications"
  ],
  "separate-locales": false,
  "modules": [
    {
      "name": "ical",
      "cleanup": [
        "/lib/cmake"
      ],
      "buildsystem": "cmake-ninja",
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DCMAKE_INSTALL_LIBDIR=/app/lib",
        "-DBUILD_SHARED_LIBS=ON"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/libical/libical/archive/v3.0.5.tar.gz",
          "sha256": "483acbf7fee66ca071c2ff8183e46b6f2b3a89e1e866eadf4870eaaa281c8db1"
        }
      ]
    },
    {
      "name": "bluez",
      "config-opts": [
        "--disable-datafiles",
        "--disable-systemd",
        "--enable-library",
        "--prefix=/app",
        "--sysconfdir=/app/etc",
        "--disable-udev"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://mirrors.edge.kernel.org/pub/linux/bluetooth/bluez-5.52.tar.xz",
          "sha256": "f7144ce2039202cfac18ccb52426efea11c98e4f6e1bb8041bcb994b8378560a"
        }
      ]
    },
    {
      "name": "qtconnectivity",
      "buildsystem": "simple",
      "cleanup-platform": [
        "/bin",
        "/mkspecs"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/qt/qtconnectivity",
          "branch": "5.13.2",
          "commit": "13b15ab1b1ee2ad56d0d37b07d694fbfc22e97a3"
        }
      ],
      "build-commands": [
        "qmake",
        "make -j $FLATPAK_BUILDER_N_JOBS",
        "cp -r -n bin /app",
        "cp -r -n include /app",
        "cp -r -n lib /app",
        "mkdir -p /app/src/bluetooth",
        "cp -r src/bluetooth /app/src/"
      ]
    },
    {
      "name": "qiflora",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "sources": [
        {
          "type": "git",
          "url": "https://git.eyecreate.org/eyecreate/qiflora.git",
          "commit": "ad3cf543c860adc49bc53791e4c54bda0c1eef9b"
        },
        {
          "type": "patch",
          "path": "icon-theme-patch.diff"
        }
      ]
    }
  ]
}
